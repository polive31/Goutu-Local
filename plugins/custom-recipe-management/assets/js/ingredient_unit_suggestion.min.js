function autoSuggestIngredient(t){term=t.val(),id=t.attr("id"),tax="ingredient",spinnerHTML=t.closest("td").next().children(".ajax-indicator"),spinnerHTML.css("visibility","hidden"),jQuery(t).autoComplete({minChars:3,delay:200,source:function(t,n){spinnerHTML.css("visibility","visible");try{xhr.abort()}catch(t){}xhr=jQuery.ajax({dataType:"json",url:"/wp-admin/admin-ajax.php",data:"action=get_tax_terms&tax="+tax+"&keys="+t,success:function(t){n(t),spinnerHTML.css("visibility","hidden")}})}})}function autoSuggestUnit(t){console.log("In autoSuggestUnit"),term=t.val(),qty=t.parents("tr.ingredient").find("td.qty input").val(),console.log("Qty = "+qty),jQuery(t).autoComplete({minChars:1,source:function(n,e){if(n=n.toLowerCase(),qty>1)var r=t.parents(".recipe-ingredients-container").data("units-plural");else r=t.parents(".recipe-ingredients-container").data("units");var s=[];for(i=0;i<r.length;i++)~r[i].toLowerCase().indexOf(n)&&s.push(r[i]);e(s)}})}jQuery(document).ready(function(){jQuery(document).on("input",".ingredients_name",function(){autoSuggestIngredient(jQuery(this))}),jQuery("input.ingredients_name").focusout(function(){spinnerHTML=jQuery(this).closest("td").next().children(".ajax-indicator"),spinnerHTML.css("visibility","hidden");try{xhr.abort()}catch(t){}}),jQuery(document).on("input",".ingredients_unit",function(){autoSuggestUnit(jQuery(this))})});