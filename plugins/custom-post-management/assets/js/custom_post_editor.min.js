function addButtonToEditor(text){if(!tinyMCE.activeEditor||tinyMCE.activeEditor.isHidden()){var text_editor=jQuery("#post_content"),current=text_editor.val();text_editor.val(current+text)}else tinyMCE.execCommand("mceInsertContent",!1,text)}jQuery(document).ready((function(){postId=jQuery('#new_post input[name="submit_post_id"]').val(),tinymce.init({selector:"#post_content",theme:"modern",language:"fr_FR",statusbar:!1,menubar:!1,toolbar:"autoresize | undo redo | styleselect | bold italic underline | link image | alignleft aligncenter alignright | bullist | searchreplace",plugins:"link spellchecker searchreplace placeholder lists image",autoresize_bottom_margin:20,min_height:200,placeholder_attrs:{style:{color:"#888","font-style":"italic",padding:"1%",width:"98%",overflow:"hidden","white-space":"pre-wrap"}},images_upload_handler:function(blobInfo,success,failure){var formData=new FormData;formData.append("action","cpm_tinymce_upload_image"),formData.append("security",cpm_editor.nonce),formData.append("postid",postId),formData.append("file",blobInfo.blob(),blobInfo.filename()),jQuery.ajax({url:cpm_editor.ajaxurl,xhrFields:{withCredentials:!1},type:"POST",data:formData,async:!0,cache:!1,processData:!1,contentType:!1,dataType:"json",success:function(json,textStatus,jqXHR){console.log("Ajax json is : ",json),json.success?(console.log("Image Upload Success !!! "),console.log("Location is : ",json.data.location),success(json.data.location)):(console.log("Image Upload Failed ",json.data.msg),failure(json.data.msg))}})}})}));