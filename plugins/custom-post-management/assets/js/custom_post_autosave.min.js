var xhr_autosave=null,formUpdated=0;const _longInterval=2e4;jQuery(document).ready((function(){console.log("%c In custom "+custom_post_autosave.post_type+" autosave script","background: #ff7; color: blue");var post_status=jQuery("#submit_post_status").val();if("restored"==post_status||"auto-draft"==post_status)var interval=setInterval((function(){autoSave()}),2e4);else console.log("%c Post status is %s, autosave disabled","background: #ff7; color: blue",post_status);var $meta=jQuery("#submission_form_meta_info"),$mainContainer=jQuery("#genesis-content"),mainPos=$mainContainer.position(),mainWidth=$mainContainer.width(),headerHeight=jQuery(".site-header").height();function autoSave(){if("undefined"!=typeof formSubmitting&&formSubmitting)return console.log("Entering autosave but detecting form submission is ongoing : abort autosave and stop periodic triggering"),void clearInterval(interval);tinyMCE.triggerSave(),console.log("%c ...Autosave triggered !","background: #ff7; color: blue");try{xhr_autosave.abort(),console.log("%c Ajax call already ongoing, aborting.","background: #ff7; color: blue")}catch(e){console.log("%c No previous autosave ajax call, ...","background: #ff7; color: blue")}var data={action:custom_post_autosave.post_type+"_autosave",post_data:jQuery("#new_post").serialize(),security:custom_post_autosave.nonce};console.table(data),xhr_autosave=jQuery.post(custom_post_autosave.ajaxurl,data,(function(response){console.table(response),response.success&&(console.log("Ajax call suceeded ! "+custom_post_autosave.post_type+" autosaved to id : ",response.data),$meta.text(response.data.modified),$meta.fadeTo(2e3,1),setTimeout((function(){$meta.fadeTo(2e3,0)}),1e4))}))}$meta.css("top",1.2*headerHeight),$meta.css("left",mainPos.left+mainWidth-$meta.width()-10)}));