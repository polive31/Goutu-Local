var wpurp_adjustable_servings={};jQuery(document).ready((function(){jQuery(document).on("click",".menu-bar .menu-tab",(function(e){jQuery(this).addClass("selected");var target=jQuery(this).data("target"),$container=jQuery("#"+target);$container.show(),jQuery.each(jQuery(this).siblings(),(function(){jQuery(this).removeClass("selected");var target=jQuery(this).data("target");jQuery("#"+target).hide()})),jQuery("html, body").animate({scrollTop:$container.offset().top-100},0)})),jQuery(document).on("click","#ingredient_share_button",(function(e){console.log("Click on cart button !");var ingredientsList="";jQuery(".wpurp-recipe-ingredients li").each((function(index){ingredientsList=ingredientsList+jQuery(this).text()+"\r\n"}));var recipeTitle=jQuery(location).attr("href");if(console.log(ingredientsList),navigator.share)console.log("Share API is supported !"),navigator.share({title:recipeTitle,text:ingredientsList,url:jQuery(location).attr("href")}).then(()=>{console.log("Sharing done")}).catch(err=>{console.log("Couldn't share because of",err.message)});else{var $target,succeed;console.log("Share API is NOT supported"),jQuery("#shopping_list_copy_buffer").val(ingredientsList).select();try{succeed=document.execCommand("copy")}catch(e){succeed=!1}succeed?(alert("La liste d'ingrédients est copiée dans votre presse-papiers."),console.log("Copy succeeded")):console.log("Copy failed"),currentFocus.focus()}})),jQuery(document).on("click",".wpurp-recipe-ingredient  .ingredient-checkbox",(function(e){e.preventDefault(),e.stopPropagation(),jQuery(this).toggleClass("checked")})),jQuery("tooltip").oncontextmenu=function(event){return event.preventDefault(),event.stopPropagation(),!1},jQuery(document).on("click","#servings .qty",(function(){var $button=jQuery(this),$input=$button.parent().find("input"),oldValue=$input.val();if("inc"==$button.attr("id"))var newVal=parseFloat(oldValue)+1;else if(oldValue>1)var newVal=parseFloat(oldValue)-1;else newVal=1;$input.val(newVal),$input.trigger("change")})),jQuery(document).on("keyup change",".adjust-recipe-servings",(function(e){var servings_input=jQuery(this);console.log("In adjust recipe servings keyup change");var amounts=servings_input.parents(".ingredients-container").find(".recipe-ingredient-quantity"),servings_original=parseFloat(servings_input.data("original")),servings_new=servings_input.val(),$printButton=jQuery("#recipe_print_button"),url=$printButton.attr("href");(isNaN(servings_new)||servings_new<=0)&&(servings_new=1),url=url.replace(/(\d+)/,servings_new),$printButton.attr("href",url),wpurp_adjustable_servings.updateAmounts(amounts,servings_original,servings_new)}))})),wpurp_adjustable_servings.parse_quantity=function(sQuantity){sQuantity=sQuantity.replace(",",".");var fractionsRegex,fractionsMap={"¼":" 1/4","½":" 1/2","¾":" 3/4","⅐":" 1/7","⅑":" 1/9","⅒":" 1/10","⅓":" 1/3","⅔":" 2/3","⅕":" 1/5","⅖":" 2/5","⅗":" 3/5","⅘":" 4/5","⅙":" 1/6","⅚":" 5/6","⅛":" 1/8","⅜":" 3/8","⅝":" 5/8","⅞":" 7/8"},parts=(sQuantity=(sQuantity=(sQuantity+"").replace(/(\u00BC|\u00BD|\u00BE|\u2150|\u2151|\u2152|\u2153|\u2154|\u2155|\u2156|\u2157|\u2158|\u2159|\u215A|\u215B|\u215C|\u215D|\u215E)/,(function(m,vf){return fractionsMap[vf]}))).trim()).split(" "),quantity=!1;if(""!==sQuantity){quantity=0;for(var i=0;i<parts.length;i++)if(""!==parts[i].trim()){var division_parts=parts[i].split("/",2),part_quantity=parseFloat(division_parts[0]);if(void 0!==division_parts[1]){var divisor=parseFloat(division_parts[1]);0!==divisor&&(part_quantity/=divisor)}quantity+=part_quantity}}return quantity},wpurp_adjustable_servings.updateAmounts=function(amounts,servings_original,servings_new){amounts.each((function(){var amount=parseFloat(jQuery(this).data("normalized"));if(servings_original==servings_new)jQuery(this).text(jQuery(this).data("original"));else if(isFinite(amount)&&0!=amount){var fraction=jQuery(this).data("fraction"),new_amount=servings_new*amount/servings_original,new_amount_text=wpurp_adjustable_servings.toFixed(new_amount,fraction),$ingredientNameContainer=jQuery(this).parents(".wpurp-recipe-ingredient").find(".recipe-ingredient-name"),$ingredientNameRoot=jQuery(this).parents(".wpurp-recipe-ingredient").find("#ingredient_name_root"),$ingredientUnitContainer=jQuery(this).next(),unitSingular=$ingredientUnitContainer.data("original"),unitPlural=$ingredientUnitContainer.data("plural");jQuery(this).text(new_amount_text+" "),new_amount>=2?($ingredientNameContainer.data("plural")&&$ingredientNameRoot.html($ingredientNameContainer.data("plural")),0!=unitPlural.length&&$ingredientUnitContainer.text(unitPlural)):($ingredientNameContainer.data("singular")&&0==unitSingular.length&&$ingredientNameRoot.html($ingredientNameContainer.data("singular")),$ingredientUnitContainer.text(unitSingular))}else jQuery(this).addClass("recipe-ingredient-nan")}))},wpurp_adjustable_servings.toFixed=function(amount,fraction){if(fraction){var fractioned_amount=Fraction(amount.toString()).snap();if(fractioned_amount.denominator<100)return fractioned_amount}if(""==amount||0==amount)return"";for(var precision=parseInt(wpurp_servings.precision),formatted=amount.toFixed(precision);0==parseFloat(formatted);)if(precision++,formatted=amount.toFixed(precision),precision>10)return"";if(precision>0){var zeroes=Array(precision+1).join("0");formatted=formatted.replace(new RegExp("."+zeroes+"$"),"")}return"undefined"!=typeof wpurp_servings&&(formatted=formatted.replace(".",wpurp_servings.decimal_character)),formatted};